<?php
 namespace App\Http\Controllers\reports; use App\Http\Controllers\Controller; use App\Models\products; use App\Models\sale_details; class saleProductsReportController extends Controller { public function index() { return view("\162\x65\160\157\162\164\x73\56\x73\141\154\x65\x50\x72\157\x64\x75\x63\x74\x73\56\151\156\144\145\x78"); } public function data($from, $to) { $products = products::all(); foreach ($products as $product) { $qty = sale_details::where("\160\x72\157\x64\x75\x63\x74\111\x44", $product->id)->whereBetween("\x64\x61\x74\x65", array($from, $to))->sum("\x71\x74\x79"); $bonus = sale_details::where("\x70\162\157\x64\x75\143\x74\111\104", $product->id)->whereBetween("\x64\x61\164\145", array($from, $to))->sum("\142\157\156\x75\163"); $product->qty = $qty; $product->bonus = $bonus; $product->price = avgSalePrice($from, $to, $product->id); } return view("\x72\x65\x70\x6f\x72\164\x73\56\x73\x61\154\145\x50\162\157\144\x75\143\164\163\x2e\x64\145\x74\x61\151\154\x73", compact("\x66\x72\x6f\x6d", "\x74\x6f", "\x70\x72\x6f\144\x75\143\x74\163")); } }